<?php

$games = new TableMaker(WSL_PATH_GAMES);
$rankings = new TableMaker(WSL_PATH_RANKINGS);
$tcorps = new TableMaker(WSL_PATH_TCORPS);

$games = $games->data;
$rankings = $rankings->data;
$tcorps = $tcorps->data;

$st = new StatsMaker($rankings,$games, $tcorps);

$cs = [
	'head'=>['name'=>'Corporation Statistics','top20'=>'Top 20', 'top50'=>'Top 50', 'all'=>'All'],
	'body' => [
		['name'=>'Average Games per Corporation', 'top20'=>'%', 'top50'=>'%', 'all'=>'%'],
		['name'=>'Most Games Submitted', '' , '' , 'most'=>'%']
			]
	];
$gs = [
	'head'=>['name'=>'Game Statistics','15v15'=>'15 v 15', '10v10'=>'10 v 10', '5v5'=>'5 v 5'],
	'body' => [
		['name'=>'Total Games', 'total'=>'%'],
		['name'=>'Average Relics for Winner', 'relics'=>'%'],
		['name'=>'Average Points Difference', 'diff'=>'%'],
		['name'=>'Percentage of Close* Games', 'close'=>'%'],
		['name'=>'Highest Relics', 'high'=>'%']
			]
	];

	$title = 'Statistics';
	TemplateMaker::Header('+'.$title);

?>

				<!-- Main -->
					<div id="main">
						<div class="inner">
						<? TemplateMaker::HeroImage(['title'=>$title,'img'=>'hadesstar-playercroporationship-by-gabrielbjorkstiernstrom.jpg','url'=>'https://gabrielbjorkstiernstrom.artstation.com','by'=>'Gabriel Bjorkstiernstrom','txt'=>'My hope is to grow this page more in the near future, with statistics for every corporation here, such as total wins and losses, high scores per bracket, and more! In the meantime, here are some total game database statistics for those who enjoy a little data visualisation.']) ?>

							<section>
								<h2>Global Statistics</h2>
								<under>Updated for v<?=WSL_VERSION?></under>
								<br><br>
								<span class="table-wrapper">
									<?=$st->makeCS($cs)?>
								</span>
								<h3>Ratings of Top 20</h3>
								<div class="row gtr-uniform">
									<div class="col-12"><?=$st->makRT20() ?></div>
								</div>
								<under>Faded columns indicate non-qualifying teams - i.e. less than 3 recorded games in the past 6 months.</under>
								<br><br>
								</span>
								<span>
								<h3>Size Breakdown of Top 20</h3>
								<div class="row gtr-uniform">
									<div class="col-12"><?=$st->makeSBT20() ?></div>
								</div>
								<br>
								<span class="table-wrapper">
									<?=$st->makeGS($gs)?>
									<under>* Close is defined as: a score difference of < 30% of the winners relic count.</under>
									<br><br>
								<span>
								<h3>All Submitted Game Sizes</h3>
								<div class="row gtr-uniform">
									<div class="col-12"><?=$st->makeASGS() ?></div>
								</div>
								<br>
								</span>
								<span>
								<h3>Day of Week for Match Start</h3>
								<div class="row gtr-uniform">
									<div class="col-12"><?=$st->makeDWMS() ?></div>
								</div>
								<br>
								</span>
								<span>
								<h3>Total Corporations</h3>
								<p>The original leaderboard, which existed as an ethereally-sourced list in HSO #white-stars, contained only 25 coporations. V5.0, posted in Novemember 2020, was the last of its kind. My early records of v6 were not great, however I began in January 2021 with around 100 corporations, and by v6.9 in August 2021 this had grown to just over 300. As of v7.0, records are far more reliable, and here below is the growth in the total number of corporations since. Also on file are the scores for each corporation at the conclusion of each cycle, however I am yet to find a convenient way to make this accessible.</p>
								<div class="row gtr-uniform">
									<div class="col-12"><?=$st->makeTC() ?></div>
								</div>
								<br>
								</span>
								<p>Have any other stats you'd like to see here? Let us know!</p>
							</section>
						</div>
					</div>
					
					
<? TemplateMaker::Footer(['highcharts.js', $st->makeScripts()]) ?>

